## 第一章 - 引言

数据库管理系统（DBMS）又一个相互关联的数据的集合和一组用以访问这些数据的程序组成。这个数据集合通常被称为**数据库**，DBMS的主要目标是提供一种可以方便、高效地存取数据库的信息的途径。

### 数据视图

数据库系统是一些相互关联的数据以及一组使得用户可以访问和修改这些数据的程序的几何，其主要目的是给用户提供数据的抽象视图。

数据库抽象的层次：

- 物理层：数据是怎么存储的
- 逻辑层：存储什么数据以及这些数据间存在什么关系
- 视图层：描述整个数据库的某个部分

<!-- TODO: 此处应有图片 -->


- 实例：特定时刻存储在数据库中的信息集合称为数据库的一个实例
- 模式（schema）：数据库的总体设计
  - 物理模式：在物理层描述数据库的设计
  - 逻辑模式：在逻辑层描述数据库的设计
  - 子模式：数据库在视图层可以用几个模式，这些被称为子模式，它描述了数据库的不同视图。

数据模型是一个描述数据、数据联系、数据语义以及一致性约束的概念工具的几何，可以分为四类

- 关系模型
- 实体 - 联系模型（E-R 模型）
- 基于对象的数据模型
- 半结构化的数据模型

### 数据库语言

数据库系统提供了**数据定义语言**和**数据操纵语言**：

- 数据操纵语言（DML）：
  - 表达数据库的查询和更新
  - 可以分为两类：
    - 过程式 DML
    - 声明式 DML
- 数据定义语言（DDL）：
  - 定义数据库模式
  - 提供了约束：
    - 域约束：类型
    - 参照完整性：一个关系中给定属性集上的取值在另一关系的某一属性集的取值中出现
    - 断言：数据库需要时刻满足的一个条件
    - 授权
  - DDL 的输出存放在数据字典中，数据字典包含元数据

### 关系型数据库

关系数据库基于关系模型，使用一系列表来表达数据以及这些数据之间的关系。

### 数据库设计

数据库设计的主要内容是数据库模式的设计：

- 制定用户需求的规格文档
- 概念设计：选择数据模型，将需求转换为数据库的概念模式
  - 使用 E-R 模型
  - 使用规范化
- 功能需求说明：数据之上的操作
- 逻辑设计阶段
- 物理设计阶段

#### E-R 模型

E-R 模型使用一组称为实体的基本对象，以及这些对象间的联系。

- 数据库中实体通过属性集合来描述
- 联系是几个实体之间的关联
- 同一类型的所有实体集合称为实体集，同一类型的所有联系的集合称作联系集合。
- 映射基数：通过某个联系能与一个实体进行关联的实体数目。


数据库的模式可以用 E-R 图来进行图形化表示，最常用的方式就是统一建模语言（UML）：

- 实体集用矩形框表示
- 联系集用连接一对相关的实体集的菱形表示。

#### 规范化

规范化的目标是生成一个关系模式集合，使得存储信息时没有不必要的冗余，同时能轻易地检索数据。

它是通过设计一种符合适当范式的模式来实现的。

### 数据存储和查询

数据库系统的功能部件大致可以分为：存储管理器和查询处理部件。

#### 存储管理器

存储管理器是数据库中负责在数据库中存储的底层数据与应用程序以及向系统提交的查询之间提供接口的部件。

其包含：

- 权限及完整性管理器
- 事务管理器
- 文件管理器
- 缓存区管理器

存储管理器实现了几种数据结构，作为系统物理实现的一部分：

- 数据文件
- 数据字典
- 索引

#### 查询处理器

查询处理器包含：

- DDL 解释器
- DML 编译器
- 查询执行引擎

### 事务管理

- 原子性：要么完成要么不完成
- 一致性：正确性的保证
- 持久性：当某个事务完成后，即使后面发生系统故障，事务执行的操作也应该生效

事务是数据库应用中完成单一逻辑功能的操作集合。每一个事务是一个具有原子性又具有一致性的单元。如果事务启动时，数据库是一致的，那么数据结束后数据库也应该是一致的。

事务管理器包括：

- 并发控制管理器
- 恢复管理器：原子性和持久性

### 数据库体系结构

